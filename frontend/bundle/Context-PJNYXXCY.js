import{a as M,b as I,c as C,d as L,i as s,j as S,k as j,l as O,m as Y}from"./chunk-I4PWNFGD.js";var E=M((b,x)=>{(function(m,l){typeof b=="object"&&typeof x=="object"?x.exports=l(C()):typeof define=="function"&&define.amd?define(["react"],l):typeof b=="object"?b.Switch=l(C()):m.Switch=l(m.react)})(b,function(m){return function(l){var u={};function n(e){if(u[e])return u[e].exports;var t=u[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=l,n.c=u,n.d=function(e,t,c){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:c})},n.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&typeof e=="object"&&e&&e.__esModule)return e;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&t&&typeof e!="string")for(var p in e)n.d(c,p,function(f){return e[f]}.bind(null,p));return c},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=1)}([function(l,u){l.exports=m},function(l,u,n){"use strict";n.r(u),n.d(u,"Case",function(){return p}),n.d(u,"Default",function(){return f});var e=n(0);function t(d,r,h){return r in d?Object.defineProperty(d,r,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[r]=h,d}class c extends e.Component{getChildren(){let r=[],h=[];return e.Children.forEach(this.props.children,y=>{switch(y.type.componentName){case"case":typeof this.props.condition=="function"?this.props.condition(y.props.value)&&r.push(y):this.props.condition===y.props.value&&r.push(y);break;case"default":h.push(y)}}),r.length>0?r:h}render(){let r=this.getChildren();return r.length===0?null:r}}class p extends e.Component{render(){return this.props.children}}t(p,"componentName","case");class f extends e.Component{render(){return this.props.children}}t(f,"componentName","default"),u.default=c}])})});var a=I(C());var g=I(E());var _=1,v,$,V=({apiUrl:m})=>{let{module:l,socketServer:u}=L(i=>i.redux),{listContent:n,screenCode:e,screen:t}=l,c=(0,a.useRef)(null),p=new WebSocket(u),[f,d]=(0,a.useState)([]),[r,h]=(0,a.useState)({});(0,a.useLayoutEffect)(()=>{let i=document.querySelector("#root");return i.classList.add(t.screen_animation),O(r)&&(s("caption",r)==="youtube"&&D(r),s("caption",r)==="video"&&y(r),s("caption",r)==="images"&&($=setInterval(()=>{P(f,_++)},3e3)),p.onopen=o=>{if(o.target.readyState){let w={screen:{reload:!1,status:"online",screenCode:e}};p.send(JSON.stringify(w))}},setTimeout(()=>{i.classList.remove(t.screen_animation)},3e3)),()=>{}},[r,e,t]);let y=i=>{let o=c.current;o.play(),o.addEventListener("play",()=>{o.muted=!1}),o.addEventListener("ended",()=>{P(f,_++),o.pause(),o.src="",o.load()})},D=i=>{v=new YT.Player("youtube-player",{height:"100%",width:"100%",videoId:Y(s("value",i)),playerVars:{mute:1,controls:0,autoPlay:1},events:{onReady:T,onStateChange:N}})},N=i=>{i.data==YT.PlayerState.PLAYING?v.unMute():i.data===YT.PlayerState.ENDED&&(v.stopVideo(),v.destroy(),v=null,P(f,_++))},T=()=>{v&&v.playVideo()},P=(i,o)=>{typeof i[o]>"u"?window.location.reload():h(i[o]),clearInterval($)};return(0,a.useLayoutEffect)(()=>{if(j(n)){let i=["images","video","youtube"],o=[];n.forEach(w=>{i.includes(s("caption",w))&&o.push(w)}),j(o)&&(d(o),h(o[0]))}return()=>{}},[n]),a.default.createElement(g.default,{condition:s("caption",r)},a.default.createElement(g.Case,{value:"youtube"},a.default.createElement("div",{id:"youtube-player",style:{height:window.innerHeight,width:window.innerWidth,transform:`translateX(calc(50vw - 50%)) translateY(calc(50vh - 50%)) rotate(${S(s("screen_rotation",t))}deg)`}})),a.default.createElement(g.Case,{value:"video"},a.default.createElement("video",{ref:c,src:`${m}/video/${s("value",r)}`,muted:!0,style:{height:window.innerHeight,width:window.innerWidth,transform:`translateX(calc(50vw - 50%)) translateY(calc(50vh - 50%)) rotate(${S(s("screen_rotation",t))}deg)`}})),a.default.createElement(g.Case,{value:"images"},a.default.createElement("img",{src:`${m}/getfile/images/${s("value",r)}`,alt:s("value",r),style:{height:window.innerHeight,width:window.innerWidth,transform:`translateX(calc(50vw - 50%)) translateY(calc(50vh - 50%)) rotate(${S(s("screen_rotation",t))}deg)`}})))},q=V;export{q as default};
/*! Bundled license information:

react-switch-case/dist/index.js:
  (*! For license information please see index.js.LICENSE.txt *)
  (*!
   * banner:
   * react-switch-case: 1.5.1
   * Aleksandrov Sergey <gooddev.sergey@gmail.com> (https://github.com/AlexSergey/react-switch-case)
   * Little switch-case React component to render nested components.
   * MIT
   *)
*/
