import{b as $,c as K,e as M,h as s,i as S,j as h,k as g,l as E,o as i,p as b,q as f,r as N}from"./chunk-YXNVQCJS.js";var o=$(K());var l,x=1,C=1,J=({apiUrl:I})=>{let{module:Y,socketServer:X}=M(r=>r.redux),{listContent:v,screenCode:w}=Y,p=(0,o.useRef)(null),y=(0,o.useRef)(null),k=(0,o.useRef)(null),z=new WebSocket(X),[n,u]=(0,o.useState)({}),[m,P]=(0,o.useState)([]),[d,T]=(0,o.useState)([]),[j,U]=(0,o.useState)("");(0,o.useLayoutEffect)(()=>(z.onopen=r=>{if(r.target.readyState){let a={screen:{reload:!1,status:"online",screenCode:w}};z.send(JSON.stringify(a))}},()=>{}),[w]),(0,o.useLayoutEffect)(()=>(f(n)&&(i("caption",n)==="youtube"&&q(n),i("caption",n)==="video"&&V(n)),()=>{}),[n]);let V=r=>{let a=p.current,t=document.createElement("video");t.src=`${I}/video/${i("value",r)}`,t.muted=!0,t.style.height=`${y.current.offsetHeight-10}px`,t.style.width="100%",t.play(),t.addEventListener("play",()=>{t.muted=!1}),a.append(t),t.addEventListener("ended",()=>{t.pause(),t.src="",t.load(),B(m,x++),t.remove()})},B=(r,a)=>{typeof r[a]>"u"?(x=1,u(r[0])):u(r[a])},q=r=>{p.current&&(l=new YT.Player(p.current,{height:"100%",width:"100%",videoId:N(i("value",r)),playerVars:{mute:1,controls:1,autoPlay:1},events:{onReady:D,onStateChange:H}}))},H=r=>{r.data==YT.PlayerState.PLAYING?l.unMute():r.data===YT.PlayerState.ENDED&&(l.stopVideo(),l.destroy(),l=null,B(m,x++))},D=()=>{l&&l.playVideo()};(0,o.useLayoutEffect)(()=>(b(m)&&u(m[0]),()=>{}),[m]);let A=(r,a={})=>{let t=document.createElement(r);for(let e in a)t.setAttribute(e,a[e]);return t},R=(r,a,t)=>{r.appendChild(a);let e=setInterval(()=>{a.remove(),L(d,C++),clearInterval(e)},t)},G=r=>{let a=k.current;if(i("caption",r)==="pengumuman"){let t=A("div");t.style.color="white";let e=document.createElement("h1"),F=document.createTextNode(i("judul",r));e.appendChild(F);let c=document.createElement("div");c.style.fontSize="20px",c.style.textAlign="justify",c.innerHTML=i("value",r),t.appendChild(e),t.appendChild(c),R(a,t,60*1e3)}if(i("caption",r)==="images"){let t=A("img",{src:E(i("value",r)),style:"width: 100%; height: auto; max-height: 100%;"});R(a,t,60*1e3)}},L=(r,a)=>{typeof r[a]>"u"?(C=1,G(r[0])):G(r[a])};return(0,o.useLayoutEffect)(()=>(b(d)&&L(d,0),()=>{}),[d]),(0,o.useLayoutEffect)(()=>{if(b(v)){let r=[],a=[],t=[];v.map(e=>{(i("caption",e)==="video"||i("caption",e)==="youtube")&&r.push(e),(i("caption",e)==="images"||i("caption",e)==="pengumuman")&&a.push(e),i("caption",e)==="running_text"&&t.push(i("value",e))}),P(r),T(a),U(t.join(" | "))}return()=>{}},[v]),o.default.createElement(S,{fluid:!0,style:{margin:0,padding:0,overflow:"hidden",background:"#039811",height:window.innerHeight,minHeight:"100vh",position:"relative"}},o.default.createElement(g,{className:"m-1 p-1"},o.default.createElement(s,{md:2,className:"text-center"},o.default.createElement(h,{src:"logo-uin-arraniry-1@2x.png",fluid:!0,style:{width:100,height:"auto"}})),o.default.createElement(s,{className:"text-center text-white align-middle mt-3"},o.default.createElement("h3",null,"UNIVERSITAS ISLAM NEGERI AR-RANIRY BANDA ACEH"),o.default.createElement("h5",null,'"KAMPUS ENERGI KEBANGSAAN, SINERGI MEMBANGUN NEGERI"')),o.default.createElement(s,{md:2,className:"text-center"},o.default.createElement(h,{src:"logo-unggul-1@2x.png",fluid:!0,style:{width:100,height:"auto"}}))),o.default.createElement(g,{className:"m-2 p-2",style:{height:"calc(100% - 180px)"},ref:y},f(n)&&o.default.createElement(s,{md:b(d)?8:12,ref:p}),b(d)&&o.default.createElement(s,{md:f(n)?4:12,ref:k})),j&&o.default.createElement(g,{className:"m-2 p-2",style:{position:"absolute",bottom:0,width:"100%",zIndex:9999}},o.default.createElement(s,{className:"text-white"},o.default.createElement("marquee",{className:"text-uppercase text-monospace fw-bold",scrollamount:"12"},j))))},or=J;export{or as default};
