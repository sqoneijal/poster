import{a as M,b as O,c as S,d as L,i as c,j as P,k as E,l as I}from"./chunk-66NILVSE.js";var _=M((b,C)=>{(function(h,u){typeof b=="object"&&typeof C=="object"?C.exports=u(S()):typeof define=="function"&&define.amd?define(["react"],u):typeof b=="object"?b.Switch=u(S()):h.Switch=u(h.react)})(b,function(h){return function(u){var d={};function t(e){if(d[e])return d[e].exports;var n=d[e]={i:e,l:!1,exports:{}};return u[e].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=u,t.c=d,t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:l})},t.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n||4&n&&typeof e=="object"&&e&&e.__esModule)return e;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&n&&typeof e!="string")for(var p in e)t.d(l,p,function(v){return e[v]}.bind(null,p));return l},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=1)}([function(u,d){u.exports=h},function(u,d,t){"use strict";t.r(d),t.d(d,"Case",function(){return p}),t.d(d,"Default",function(){return v});var e=t(0);function n(r,a,y){return a in r?Object.defineProperty(r,a,{value:y,enumerable:!0,configurable:!0,writable:!0}):r[a]=y,r}class l extends e.Component{getChildren(){let a=[],y=[];return e.Children.forEach(this.props.children,f=>{switch(f.type.componentName){case"case":typeof this.props.condition=="function"?this.props.condition(f.props.value)&&a.push(f):this.props.condition===f.props.value&&a.push(f);break;case"default":y.push(f)}}),a.length>0?a:y}render(){let a=this.getChildren();return a.length===0?null:a}}class p extends e.Component{render(){return this.props.children}}n(p,"componentName","case");class v extends e.Component{render(){return this.props.children}}n(v,"componentName","default"),d.default=l}])})});var i=O(S());var g=O(_());var j=1,m,D,T=({apiUrl:h})=>{let{module:u,socketServer:d}=L(s=>s.redux),{listContent:t,screenCode:e}=u,n=(0,i.useRef)(null),l=new WebSocket(d),[p,v]=(0,i.useState)([]),[r,a]=(0,i.useState)({});(0,i.useLayoutEffect)(()=>(E(r)&&(c("caption",r)==="youtube"&&f(r),c("caption",r)==="video"&&y(r),c("caption",r)==="images"&&(D=setInterval(()=>{w(p,j++)},3e3)),l.onopen=s=>{if(s.target.readyState){let o={screen:{reload:!1,status:"online",screenCode:e}};l.send(JSON.stringify(o))}}),()=>{}),[r,e]);let y=s=>{let o=n.current;o.play(),o.addEventListener("play",()=>{o.muted=!1}),o.addEventListener("ended",()=>{w(p,j++),o.pause(),o.src="",o.load()})},f=s=>{m=new YT.Player("youtube-player",{height:"100%",width:"100%",videoId:I(c("value",s)),playerVars:{mute:1,controls:0,autoPlay:1},events:{onReady:Y,onStateChange:N}})},N=s=>{s.data==YT.PlayerState.PLAYING?m.unMute():s.data===YT.PlayerState.ENDED&&(m.stopVideo(),m.destroy(),m=null,w(p,j++))},Y=()=>{m&&m.playVideo()},w=(s,o)=>{typeof s[o]>"u"?window.location.reload():a(s[o]),clearInterval(D)};return(0,i.useLayoutEffect)(()=>{if(P(t)){let s=["images","video","youtube"],o=[];t.forEach(x=>{s.includes(c("caption",x))&&o.push(x)}),P(o)&&(v(o),a(o[0]))}return()=>{}},[t]),i.default.createElement(g.default,{condition:c("caption",r)},i.default.createElement(g.Case,{value:"youtube"},i.default.createElement("div",{id:"youtube-player",style:{height:window.innerHeight,width:window.innerWidth}})),i.default.createElement(g.Case,{value:"video"},i.default.createElement("video",{ref:n,src:`${h}/video/${c("value",r)}`,muted:!0,style:{height:window.innerHeight,width:window.innerWidth}})),i.default.createElement(g.Case,{value:"images"},i.default.createElement("img",{src:`${h}/getfile/images/${c("value",r)}`,alt:c("value",r),style:{height:window.innerHeight,width:window.innerWidth}})))},W=T;export{W as default};
/*! Bundled license information:

react-switch-case/dist/index.js:
  (*! For license information please see index.js.LICENSE.txt *)
  (*!
   * banner:
   * react-switch-case: 1.5.1
   * Aleksandrov Sergey <gooddev.sergey@gmail.com> (https://github.com/AlexSergey/react-switch-case)
   * Little switch-case React component to render nested components.
   * MIT
   *)
*/
