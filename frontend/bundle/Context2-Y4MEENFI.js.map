{
  "version": 3,
  "sources": ["../src/Context2.jsx"],
  "sourcesContent": ["import \"../node_modules/bootstrap/dist/css/bootstrap.min.css\";\n\nimport React, { useLayoutEffect, useRef, useState } from \"react\";\nimport { Col, Container, Image, Row } from \"react-bootstrap\";\nimport { useSelector } from \"react-redux\";\nimport * as h from \"~/Helpers\";\n\nlet player;\nlet currentLeftIndex = 1;\nlet currentRightIndex = 1;\n\nconst Context2 = ({ apiUrl }) => {\n   const { module, socketServer } = useSelector((e) => e.redux);\n   const { listContent, screenCode } = module;\n   const videoRef = useRef(null);\n   const leftColumn = useRef(null);\n   const imageRef = useRef(null);\n   const socket = new WebSocket(socketServer);\n\n   // object\n   const [leftSlide, setLeftSlide] = useState({});\n\n   // array\n   const [videoSlide, setVideoSlide] = useState([]);\n   const [imageSlide, setImageSlide] = useState([]);\n\n   // string\n   const [textRunning, setTextRunning] = useState(\"\");\n\n   useLayoutEffect(() => {\n      socket.onopen = (e) => {\n         if (e.target.readyState) {\n            const data = {\n               screen: {\n                  reload: false,\n                  status: \"online\",\n                  screenCode,\n               },\n            };\n            socket.send(JSON.stringify(data));\n         }\n      };\n      return () => {};\n   }, [screenCode]);\n\n   useLayoutEffect(() => {\n      if (h.objLength(leftSlide)) {\n         if (h.parse(\"caption\", leftSlide) === \"youtube\") {\n            handlePlayYoutube(leftSlide);\n         }\n         if (h.parse(\"caption\", leftSlide) === \"video\") {\n            handlePlayVideo(leftSlide);\n         }\n      }\n      return () => {};\n   }, [leftSlide]);\n\n   const handlePlayVideo = (data) => {\n      const ref = videoRef.current;\n\n      const video = document.createElement(\"video\");\n      video.src = `${apiUrl}/video/${h.parse(\"value\", data)}`;\n      video.muted = true;\n      video.style.height = `${leftColumn.current.offsetHeight - 10}px`;\n      video.style.width = `100%`;\n      video.play();\n      video.addEventListener(\"play\", () => {\n         video.muted = false;\n      });\n      ref.append(video);\n\n      video.addEventListener(\"ended\", () => {\n         video.pause();\n         video.src = \"\";\n         video.load();\n         handlePlayLeftSlide(videoSlide, currentLeftIndex++);\n         video.remove();\n      });\n   };\n\n   const handlePlayLeftSlide = (lists, index) => {\n      if (typeof lists[index] === \"undefined\") {\n         currentLeftIndex = 1;\n         setLeftSlide(lists[0]);\n      } else {\n         setLeftSlide(lists[index]);\n      }\n   };\n\n   const handlePlayYoutube = (data) => {\n      if (videoRef.current) {\n         player = new YT.Player(videoRef.current, {\n            height: \"100%\",\n            width: \"100%\",\n            videoId: h.getYoutubeVideoId(h.parse(\"value\", data)),\n            playerVars: {\n               mute: 1,\n               controls: 1,\n               autoPlay: 1,\n            },\n            events: {\n               onReady: onPlayerReady,\n               onStateChange: onPlayerStateChange,\n            },\n         });\n      }\n   };\n\n   const onPlayerStateChange = (event) => {\n      if (event.data == YT.PlayerState.PLAYING) {\n         player.unMute();\n      } else if (event.data === YT.PlayerState.ENDED) {\n         player.stopVideo();\n         player.destroy();\n         player = null;\n         handlePlayLeftSlide(videoSlide, currentLeftIndex++);\n      }\n   };\n\n   const onPlayerReady = () => {\n      if (player) {\n         player.playVideo();\n      }\n   };\n\n   useLayoutEffect(() => {\n      if (h.arrLength(videoSlide)) setLeftSlide(videoSlide[0]);\n      return () => {};\n   }, [videoSlide]);\n\n   const createElement = (tagName, attributes = {}) => {\n      const element = document.createElement(tagName);\n      for (const key in attributes) {\n         element.setAttribute(key, attributes[key]);\n      }\n      return element;\n   };\n\n   const appendAndRemoveAfterInterval = (parentElement, childElement, intervalTime) => {\n      parentElement.appendChild(childElement);\n      const interval = setInterval(() => {\n         childElement.remove();\n         handlePlayRightColumn(imageSlide, currentRightIndex++);\n         clearInterval(interval);\n      }, intervalTime);\n   };\n\n   const submitPlayRightColumn = (data) => {\n      const element = imageRef.current;\n\n      if (h.parse(\"caption\", data) === \"pengumuman\") {\n         const divElement = createElement(\"div\");\n         divElement.style.color = `white`;\n\n         const headingElement = document.createElement(\"h1\");\n         const headingText = document.createTextNode(h.parse(\"judul\", data));\n         headingElement.appendChild(headingText);\n\n         const paragraphElement = document.createElement(\"div\");\n         paragraphElement.style.fontSize = `20px`;\n         paragraphElement.style.textAlign = \"justify\";\n         paragraphElement.innerHTML = h.parse(\"value\", data);\n\n         divElement.appendChild(headingElement);\n         divElement.appendChild(paragraphElement);\n         appendAndRemoveAfterInterval(element, divElement, 60 * 1000);\n      }\n\n      if (h.parse(\"caption\", data) === \"images\") {\n         const image = createElement(\"img\", {\n            src: h.getFile(h.parse(\"value\", data)),\n            style: `width: 100%; height: auto; max-height: 100%;`,\n         });\n         appendAndRemoveAfterInterval(element, image, 60 * 1000);\n      }\n   };\n\n   const handlePlayRightColumn = (lists, index) => {\n      if (typeof lists[index] === \"undefined\") {\n         currentRightIndex = 1;\n         submitPlayRightColumn(lists[0]);\n      } else {\n         submitPlayRightColumn(lists[index]);\n      }\n   };\n\n   useLayoutEffect(() => {\n      if (h.arrLength(imageSlide)) handlePlayRightColumn(imageSlide, 0);\n      return () => {};\n   }, [imageSlide]);\n\n   useLayoutEffect(() => {\n      if (h.arrLength(listContent)) {\n         const dataVideo = [];\n         const dataImages = [];\n         const runningText = [];\n\n         listContent.map((row) => {\n            if (h.parse(\"caption\", row) === \"video\" || h.parse(\"caption\", row) === \"youtube\") {\n               dataVideo.push(row);\n            }\n\n            if (h.parse(\"caption\", row) === \"images\" || h.parse(\"caption\", row) === \"pengumuman\") {\n               dataImages.push(row);\n            }\n\n            if (h.parse(\"caption\", row) === \"running_text\") {\n               runningText.push(h.parse(\"value\", row));\n            }\n         });\n\n         setVideoSlide(dataVideo);\n         setImageSlide(dataImages);\n         setTextRunning(runningText.join(\" | \"));\n      }\n      return () => {};\n   }, [listContent]);\n\n   return (\n      <Container\n         fluid\n         style={{\n            margin: 0,\n            padding: 0,\n            overflow: \"hidden\",\n            background: \"#039811\",\n            height: window.innerHeight,\n            minHeight: \"100vh\",\n            position: \"relative\",\n         }}>\n         <Row className=\"m-1 p-1\">\n            <Col md={2} className=\"text-center\">\n               <Image src=\"logo-uin-arraniry-1@2x.png\" fluid style={{ width: 100, height: \"auto\" }} />\n            </Col>\n            <Col className=\"text-center text-white align-middle mt-3\">\n               <h3>UNIVERSITAS ISLAM NEGERI AR-RANIRY BANDA ACEH</h3>\n               <h5>\"KAMPUS ENERGI KEBANGSAAN, SINERGI MEMBANGUN NEGERI\"</h5>\n            </Col>\n            <Col md={2} className=\"text-center\">\n               <Image src=\"logo-unggul-1@2x.png\" fluid style={{ width: 100, height: \"auto\" }} />\n            </Col>\n         </Row>\n         <Row className=\"m-2 p-2\" style={{ height: `calc(100% - 180px)` }} ref={leftColumn}>\n            {h.objLength(leftSlide) && <Col md={h.arrLength(imageSlide) ? 8 : 12} ref={videoRef} />}\n            {h.arrLength(imageSlide) && <Col md={h.objLength(leftSlide) ? 4 : 12} ref={imageRef} />}\n         </Row>\n         {textRunning && (\n            <Row className=\"m-2 p-2\" style={{ position: \"absolute\", bottom: 0, width: \"100%\", zIndex: 9999 }}>\n               <Col className=\"text-white\">\n                  <marquee className=\"text-uppercase text-monospace fw-bold\" scrollamount=\"12\">\n                     {textRunning}\n                  </marquee>\n               </Col>\n            </Row>\n         )}\n      </Container>\n   );\n};\nexport default Context2;\n"],
  "mappings": "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",
  "names": ["import_react", "player", "currentLeftIndex", "currentRightIndex", "Context2", "apiUrl", "module", "socketServer", "useSelector", "e", "listContent", "screenCode", "videoRef", "leftColumn", "imageRef", "socket", "leftSlide", "setLeftSlide", "videoSlide", "setVideoSlide", "imageSlide", "setImageSlide", "textRunning", "setTextRunning", "data", "objLength", "parse", "handlePlayYoutube", "handlePlayVideo", "ref", "video", "handlePlayLeftSlide", "lists", "index", "getYoutubeVideoId", "onPlayerReady", "onPlayerStateChange", "event", "arrLength", "createElement", "tagName", "attributes", "element", "key", "appendAndRemoveAfterInterval", "parentElement", "childElement", "intervalTime", "interval", "handlePlayRightColumn", "submitPlayRightColumn", "divElement", "headingElement", "headingText", "paragraphElement", "image", "getFile", "dataVideo", "dataImages", "runningText", "row", "React", "Container_default", "Row_default", "Col_default", "Image_default", "Context2_default"]
}
