import{c as y}from"./chunk-PB4JHPSQ.js";import{a as L,c as T}from"./chunk-DUWXWW73.js";import{c as f,d as o,f as h,h as D,i as E,j as g,k as G,n as H,r as v}from"./chunk-5VQXXJVA.js";import{e as j,f as l,g as d,p as c}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as M,e as P}from"./chunk-2ZKIS3S6.js";var e=M(P());var q=({daftarRotasi:I,daftarAnimasi:O})=>{let{module:p,init:W,websocket:$}=L(t=>t.redux),{openForms:C,pageType:m,detailContent:u}=p,b=T(),N=new WebSocket($),[w,k]=(0,e.useState)(!1),[s,n]=(0,e.useState)({}),[_,x]=(0,e.useState)({});(0,e.useLayoutEffect)(()=>(m==="update"&&D(u)&&n({...u,old_kode:o("kode",u)}),()=>{}),[m,u]);let F=()=>{n({}),x({})},S=()=>{F(),b(y({...p,pageType:"",detailContent:{},openForms:!1}))},A=t=>{t.preventDefault();let a={pageType:m,user_modified:o("username",W)};Object.keys(s).forEach(i=>a[i]=s[i]),k(!0);let B=G("/submit",a);B.then(i=>{if(typeof i>"u")return;let{data:r}=i;if(typeof r.code<"u"&&o("code",r)!==200){f(!1,o("message",r));return}x(r.errors),f(r.status,r.msg_response),r.status&&(F(),b(y({...p,pageType:"",detailContent:{},openForms:!1})),H(),N.onopen=J=>{if(J.target.readyState){let K={screen:{reload:!0,status:"online",screenCode:[o("kode",s)]}};N.send(JSON.stringify(K))}})}),B.finally(()=>{k(!1)})};return e.default.createElement(e.default.Fragment,null,C&&e.default.createElement("div",{className:"drawer-overlay"}),e.default.createElement("div",{className:`bg-white drawer drawer-start ${C?"drawer-on":""}`,style:{width:window.innerWidth/2}},e.default.createElement(l,{className:"rounded-0 w-100"},e.default.createElement(l.Header,{className:"pe-5"},e.default.createElement("div",{className:"card-title"},e.default.createElement("div",{className:"d-flex justify-content-center flex-column me-3"},e.default.createElement("span",{className:"fs-4 fw-bold text-gray-900 text-hover-primary me-1 lh-1"},E(m)," ",document.title))),e.default.createElement("div",{className:"card-toolbar"},e.default.createElement("button",{className:"btn btn-sm btn-icon btn-active-light-primary",onClick:S},e.default.createElement("i",{className:"ki-duotone ki-cross fs-2"},e.default.createElement("span",{className:"path1"}),e.default.createElement("span",{className:"path2"}))))),e.default.createElement(l.Body,{className:"hover-scroll-overlay-y"},e.default.createElement(c,null,e.default.createElement(d,{md:3,sm:12},g("Kode","kode",{onChange:t=>n(a=>({...a,[t.target.name]:t.target.value})),value:o("kode",s)},!0,_)),e.default.createElement(d,null,g("Nama","nama",{onChange:t=>n(a=>({...a,[t.target.name]:t.target.value})),value:o("nama",s)},!0,_))),e.default.createElement(c,null,e.default.createElement(d,{md:3,sm:12},v("Rotasi Layar","screen_rotation",{onChange:t=>n(a=>({...a,[t.target.name]:t.target.value})),value:o("screen_rotation",s)},I)),e.default.createElement(d,{md:5,sm:12},v("Animasi Layar","screen_animation",{onChange:t=>n(a=>({...a,[t.target.name]:t.target.value})),value:o("screen_animation",s)},O)))),e.default.createElement(l.Footer,{className:"text-end"},e.default.createElement(j,null,h(`Simpan ${document.title}`,w,{onClick:w?null:A}),h("Batal",!1,{variant:"danger",onClick:()=>S()}))))))},X=q;export{X as default};
