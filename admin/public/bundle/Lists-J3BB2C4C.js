import{c as y}from"./chunk-PB4JHPSQ.js";import{a as u,c as m}from"./chunk-DUWXWW73.js";import{c as h,d as l,o as f,q as b}from"./chunk-5VQXXJVA.js";import{q as p}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as g,e as v}from"./chunk-2ZKIS3S6.js";var e=g(v());var d,x=()=>{let{module:w,websocket:_}=u(t=>t.redux),k=m();return d=f({show_edit_button:!0,show_delete_button:!0,url:"/getdata",columns:[{data:"kode"},{data:"nama"},{data:"screen_rotation"},{data:"screen_animation"},{data:null,render:t=>`<span id="status-${l("kode",t)}" class="text-danger fw-bold fs-4">Offline</span>`},{data:null,width:"10%"}],columnDefs:!0,createdRow:(t,s)=>{let n=t.querySelector("#edit");n&&(n.onclick=r=>{r.preventDefault(),k(y({...w,openForms:!0,pageType:"update",detailContent:s}))});let o=t.querySelector("#delete");o&&(o.onclick=r=>{r.preventDefault(),b({url:"/hapus",id:s.id}).then(c=>{if(typeof c>"u")return;let{data:i}=c;h(i.status,i.msg_response),i.status&&d.reload()})});let a=t.querySelector("#view-screen");a.onclick=r=>{r.preventDefault(),window.open(`http://192.168.176.193:8001/?screen=${l("kode",s)}`,"_blank")}},custom_button:'<a href="#" id="view-screen" class="btn btn-active-icon-primary btn-active-text-primary btn-sm p-0 m-0"><i class="ki-outline ki-monitor-mobile fs-1"></i></a>'}),(0,e.useLayoutEffect)(()=>{d.init();let t=new WebSocket(_);return t.onmessage=s=>{try{let o=JSON.parse(s.data).screen,a=document.querySelector(`#status-${o.screenCode}`);if(!a)return;a.classList.remove("text-danger"),a.classList.add("text-primary"),a.innerHTML="Online"}catch(n){console.log(n)}},()=>{}},[]),e.default.createElement(p,{responsive:!0,hover:!0,id:"datatable",className:"align-middle table-row-dashed fs-6",size:"sm"},e.default.createElement("thead",null,e.default.createElement("tr",{className:"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0"},e.default.createElement("th",null,"kode"),e.default.createElement("th",null,"nama"),e.default.createElement("th",null,"rotasi"),e.default.createElement("th",null,"animasi"),e.default.createElement("th",null,"status"),e.default.createElement("th",null))),e.default.createElement("tbody",{className:"text-gray-600 fw-semibold"}))},T=x;export{T as default};
