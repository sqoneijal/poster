import{a as E}from"./chunk-EHA3D7HX.js";import{a as D}from"./chunk-SJTF4NYS.js";import{b as C,c as N,d as r,e as n,g as w,p as L}from"./chunk-5VQXXJVA.js";import{g as I,p as v,q as x}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as z,e as F}from"./chunk-2ZKIS3S6.js";var t=z(F());var p=0,k=({selectedPengumuman:u,setSelectedPengumuman:f})=>{let a=(0,t.useRef)(null),[c,m]=(0,t.useState)(!1),[g,O]=(0,t.useState)(!0),[l,b]=(0,t.useState)({}),[h,y]=(0,t.useState)([]),T=(e,s)=>{if(w(e))if(e.includes(n(r("id",s)))){let i=[];e.forEach(o=>{o!==n(r("id",s))&&i.push(o)}),f(i)}else f([...e,n(r("id",s))]);else f([...e,n(r("id",s))])},d=e=>{let s=C(`/getdaftarpengumuman?${L(e)}`);s.then(i=>{if(typeof i>"u")return;let{data:o}=i;if(typeof o.code<"u"&&r("code",o)!==200){N(!1,r("message",o));return}b(e),r("source",e)&&r("source",e)==="filter"?y(o.listContent):y(j=>j.concat(o.listContent)),p=o.totalData}),s.finally(()=>{O(!1)})};return(0,t.useLayoutEffect)(()=>(d({page:0}),()=>{}),[]),(0,t.useLayoutEffect)(()=>{let e=new IntersectionObserver(s=>{s[0].isIntersecting&&m(!0)},{threshold:1});return a.current&&e.observe(a.current),()=>{a.current&&e.unobserve(a.current)}},[a,h]),(0,t.useLayoutEffect)(()=>(c&&p>h.length&&!g&&d({...l,source:"",page:n(l.page)+1}),()=>m(!1)),[c,p,h,l,g]),t.default.createElement(v,null,t.default.createElement(E,{...{filter:l,setFilter:b,getData:d}}),t.default.createElement(I,null,t.default.createElement(x,{responsive:!0,hover:!0,className:"align-middle table-row-dashed fs-6",size:"sm"},t.default.createElement("thead",null,t.default.createElement("tr",{className:"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0"},t.default.createElement("th",{style:{width:"5%"},className:"text-center"},"no"),t.default.createElement("th",null,"judul"))),t.default.createElement("tbody",{className:"text-gray-600 fw-semibold"},t.default.createElement(D,{of:h,render:(e,s)=>t.default.createElement("tr",{style:{cursor:"pointer"},className:u.includes(n(r("id",e)))?"selected":"",onClick:()=>T(u,e)},t.default.createElement("td",{className:"text-center"},s+1),t.default.createElement("td",null,r("judul",e)))})))),t.default.createElement("div",{ref:a}))},G=k;export{G as default};
