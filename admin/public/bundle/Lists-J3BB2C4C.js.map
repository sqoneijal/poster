{
  "version": 3,
  "sources": ["../../src/page/Admin/Screen/Lists.jsx"],
  "sourcesContent": ["import React, { useLayoutEffect } from \"react\";\nimport { Table } from \"react-bootstrap\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as h from \"~/Helpers\";\nimport { setModule } from \"~/redux\";\n\nlet datatable;\n\nconst Lists = () => {\n   const { module, websocket } = useSelector((e) => e.redux);\n   const dispatch = useDispatch();\n\n   const datatable_url = `/getdata`;\n   datatable = h.initDatatable({\n      show_edit_button: true,\n      show_delete_button: true,\n      url: datatable_url,\n      columns: [\n         { data: \"kode\" },\n         { data: \"nama\" },\n         { data: \"screen_rotation\" },\n         { data: \"screen_animation\" },\n         {\n            data: null,\n            render: (data) => {\n               return `<span id=\"status-${h.parse(\"kode\", data)}\" class=\"text-danger fw-bold fs-4\">Offline</span>`;\n            },\n         },\n         { data: null, width: \"10%\" },\n      ],\n      columnDefs: true,\n      createdRow: (row, data) => {\n         const _edit = row.querySelector(\"#edit\");\n         if (_edit) {\n            _edit.onclick = (e) => {\n               e.preventDefault();\n               dispatch(setModule({ ...module, openForms: true, pageType: \"update\", detailContent: data }));\n            };\n         }\n\n         const _delete = row.querySelector(\"#delete\");\n         if (_delete) {\n            _delete.onclick = (e) => {\n               e.preventDefault();\n               h.confirmDelete({\n                  url: \"/hapus\",\n                  id: data.id,\n               }).then((res) => {\n                  if (typeof res === \"undefined\") return;\n                  const { data } = res;\n                  h.notification(data.status, data.msg_response);\n                  data.status && datatable.reload();\n               });\n            };\n         }\n\n         const viewScreen = row.querySelector(\"#view-screen\");\n         viewScreen.onclick = (e) => {\n            e.preventDefault();\n            window.open(`http://192.168.176.193:8001/?screen=${h.parse(\"kode\", data)}`, \"_blank\");\n         };\n      },\n      custom_button: `<a href=\"#\" id=\"view-screen\" class=\"btn btn-active-icon-primary btn-active-text-primary btn-sm p-0 m-0\"><i class=\"ki-outline ki-monitor-mobile fs-1\"></i></a>`,\n   });\n\n   useLayoutEffect(() => {\n      datatable.init();\n\n      const conn = new WebSocket(websocket);\n      conn.onmessage = (e) => {\n         try {\n            const data = JSON.parse(e.data);\n            const screen = data.screen;\n\n            const el = document.querySelector(`#status-${screen.screenCode}`);\n            if (!el) return;\n\n            el.classList.remove(\"text-danger\");\n            el.classList.add(\"text-primary\");\n            el.innerHTML = \"Online\";\n         } catch (error) {\n            console.log(error);\n         }\n      };\n      return () => {};\n   }, []);\n\n   return (\n      <Table responsive hover id=\"datatable\" className=\"align-middle table-row-dashed fs-6\" size=\"sm\">\n         <thead>\n            <tr className=\"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0\">\n               <th>kode</th>\n               <th>nama</th>\n               <th>rotasi</th>\n               <th>animasi</th>\n               <th>status</th>\n               <th />\n            </tr>\n         </thead>\n         <tbody className=\"text-gray-600 fw-semibold\" />\n      </Table>\n   );\n};\nexport default Lists;\n"],
  "mappings": "+TAAA,IAAAA,EAAuC,OAMvC,IAAIC,EAEEC,EAAQ,IAAM,CACjB,GAAM,CAAE,OAAAC,EAAQ,UAAAC,CAAU,EAAIC,EAAaC,GAAMA,EAAE,KAAK,EAClDC,EAAWC,EAAY,EAG7B,OAAAP,EAAcQ,EAAc,CACzB,iBAAkB,GAClB,mBAAoB,GACpB,IAJmB,WAKnB,QAAS,CACN,CAAE,KAAM,MAAO,EACf,CAAE,KAAM,MAAO,EACf,CAAE,KAAM,iBAAkB,EAC1B,CAAE,KAAM,kBAAmB,EAC3B,CACG,KAAM,KACN,OAASC,GACC,oBAAsBC,EAAM,OAAQD,CAAI,CAAC,mDAEtD,EACA,CAAE,KAAM,KAAM,MAAO,KAAM,CAC9B,EACA,WAAY,GACZ,WAAY,CAACE,EAAKF,IAAS,CACxB,IAAMG,EAAQD,EAAI,cAAc,OAAO,EACnCC,IACDA,EAAM,QAAWP,GAAM,CACpBA,EAAE,eAAe,EACjBC,EAASO,EAAU,CAAE,GAAGX,EAAQ,UAAW,GAAM,SAAU,SAAU,cAAeO,CAAK,CAAC,CAAC,CAC9F,GAGH,IAAMK,EAAUH,EAAI,cAAc,SAAS,EACvCG,IACDA,EAAQ,QAAWT,GAAM,CACtBA,EAAE,eAAe,EACfU,EAAc,CACb,IAAK,SACL,GAAIN,EAAK,EACZ,CAAC,EAAE,KAAMO,GAAQ,CACd,GAAI,OAAOA,EAAQ,IAAa,OAChC,GAAM,CAAE,KAAAP,CAAK,EAAIO,EACfC,EAAaR,EAAK,OAAQA,EAAK,YAAY,EAC7CA,EAAK,QAAUT,EAAU,OAAO,CACnC,CAAC,CACJ,GAGH,IAAMkB,EAAaP,EAAI,cAAc,cAAc,EACnDO,EAAW,QAAWb,GAAM,CACzBA,EAAE,eAAe,EACjB,OAAO,KAAK,uCAAyCK,EAAM,OAAQD,CAAI,CAAC,GAAI,QAAQ,CACvF,CACH,EACA,cAAe,+JAClB,CAAC,KAED,mBAAgB,IAAM,CACnBT,EAAU,KAAK,EAEf,IAAMmB,EAAO,IAAI,UAAUhB,CAAS,EACpC,OAAAgB,EAAK,UAAad,GAAM,CACrB,GAAI,CAED,IAAMe,EADO,KAAK,MAAMf,EAAE,IAAI,EACV,OAEdgB,EAAK,SAAS,cAAc,WAAWD,EAAO,UAAU,EAAE,EAChE,GAAI,CAACC,EAAI,OAETA,EAAG,UAAU,OAAO,aAAa,EACjCA,EAAG,UAAU,IAAI,cAAc,EAC/BA,EAAG,UAAY,QAClB,OAASC,EAAO,CACb,QAAQ,IAAIA,CAAK,CACpB,CACH,EACO,IAAM,CAAC,CACjB,EAAG,CAAC,CAAC,EAGF,EAAAC,QAAA,cAACC,EAAA,CAAM,WAAU,GAAC,MAAK,GAAC,GAAG,YAAY,UAAU,qCAAqC,KAAK,MACxF,EAAAD,QAAA,cAAC,aACE,EAAAA,QAAA,cAAC,MAAG,UAAU,6DACX,EAAAA,QAAA,cAAC,UAAG,MAAI,EACR,EAAAA,QAAA,cAAC,UAAG,MAAI,EACR,EAAAA,QAAA,cAAC,UAAG,QAAM,EACV,EAAAA,QAAA,cAAC,UAAG,SAAO,EACX,EAAAA,QAAA,cAAC,UAAG,QAAM,EACV,EAAAA,QAAA,cAAC,SAAG,CACP,CACH,EACA,EAAAA,QAAA,cAAC,SAAM,UAAU,4BAA4B,CAChD,CAEN,EACOE,EAAQxB",
  "names": ["import_react", "datatable", "Lists", "module", "websocket", "useSelector", "e", "dispatch", "useDispatch", "initDatatable", "data", "parse", "row", "_edit", "setModule", "_delete", "confirmDelete", "res", "notification", "viewScreen", "conn", "screen", "el", "error", "React", "Table_default", "Lists_default"]
}
