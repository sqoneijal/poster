import{a as Z}from"./chunk-MUZTHDHO.js";import{a as W}from"./chunk-SJTF4NYS.js";import{c as k}from"./chunk-PB4JHPSQ.js";import{a as V}from"./chunk-LOOOLLH5.js";import{a as Y,c as j}from"./chunk-DUWXWW73.js";import{c as w,d as s,f as x,g as r,h as E,k as G,n as H}from"./chunk-5VQXXJVA.js";import{e as A,f as l}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as _,e as X}from"./chunk-2ZKIS3S6.js";var e=_(X());var n=_(Z());var R=e.default.lazy(()=>import("./Images-3FON3AM2.js")),ee=e.default.lazy(()=>import("./Video-3DONUAMO.js")),te=e.default.lazy(()=>import("./Youtube-CSX67VGH.js")),se=e.default.lazy(()=>import("./RunningText-DO3QJAK2.js")),ne=e.default.lazy(()=>import("./Pengumuman-CPAM2NSX.js")),ae=()=>{let{module:d,init:$,websocket:M}=Y(a=>a.redux),{openFormsContent:u,detailContent:t}=d,F=j(),m=new WebSocket(M),[L,B]=(0,e.useState)(!1),[c,p]=(0,e.useState)([]),[f,h]=(0,e.useState)([]),[v,b]=(0,e.useState)([]),[g,y]=(0,e.useState)([]),[C,N]=(0,e.useState)([]),[I,J]=(0,e.useState)(1);(0,e.useLayoutEffect)(()=>(u&&E(t)&&(p(t.images),h(t.video),b(t.youtube),y(t.running_text),N(t.pengumuman)),()=>{}),[u,t]);let O=()=>{p([]),h([]),b([]),y([]),N([]),J(1)},T=()=>{O(),F(k({...d,openFormsContent:!1,detailContent:{}}))},q=a=>{a.preventDefault();let S={id:s("id",t),user_modified:s("username",$),images:JSON.stringify(r(c)?c:[]),video:JSON.stringify(r(f)?f:[]),youtube:JSON.stringify(r(v)?v:[]),running_text:JSON.stringify(r(g)?g:[]),pengumuman:JSON.stringify(r(C)?C:[])};B(!0);let z=G("/submitcontent",S);z.then(D=>{if(typeof D>"u")return;let{data:o}=D;if(typeof o.code<"u"&&s("code",o)!==200){w(!1,s("message",o));return}if(w(o.status,o.msg_response),!o.status||(O(),F(k({...d,openFormsContent:!1,detailContent:{}})),H(),!m.readyState))return;console.log(m);let P=[];t.screen_active.map(U=>{P.push(s("kode",U))});let Q={screen:{reload:!0,status:"online",screenCode:P}};m.send(JSON.stringify(Q))}),z.finally(()=>{B(!1)})},K=[{value:1,label:"Images"},{value:2,label:"Video"},{value:3,label:"Youtube"},{value:4,label:"Running Text"},{value:5,label:"Pengumuman"}],i={selectedImages:c,setSelectedImages:p,selectedVideo:f,setSelectedVideo:h,selectedYoutube:v,setSelectedYoutube:b,selectedRunningText:g,setSelectedRunningText:y,selectedPengumuman:C,setSelectedPengumuman:N};return e.default.createElement(e.default.Fragment,null,u&&e.default.createElement("div",{className:"drawer-overlay"}),e.default.createElement("div",{className:`bg-white drawer drawer-start ${u?"drawer-on":""}`,style:{width:window.innerWidth/2}},e.default.createElement(l,{className:"rounded-0 w-100"},e.default.createElement(l.Header,{className:"pe-5"},e.default.createElement("div",{className:"card-title"},e.default.createElement("div",{className:"d-flex justify-content-center flex-column me-3"},e.default.createElement("span",{className:"fs-4 fw-bold text-gray-900 text-hover-primary me-1 lh-1"},"Daftar Content"))),e.default.createElement("div",{className:"card-toolbar"},e.default.createElement("button",{className:"btn btn-sm btn-icon btn-active-light-primary",onClick:T},e.default.createElement("i",{className:"ki-duotone ki-cross fs-2"},e.default.createElement("span",{className:"path1"}),e.default.createElement("span",{className:"path2"}))))),e.default.createElement(l.Body,{className:"hover-scroll-overlay-y"},e.default.createElement("ul",{className:"nav nav-tabs nav-line-tabs mb-5 fs-6"},e.default.createElement(W,{of:K,render:a=>e.default.createElement("li",{className:"nav-item"},e.default.createElement("a",{className:`nav-link ${I===s("value",a)?"active":""}`,"data-bs-toggle":"tab",href:"#",onClick:S=>{S.preventDefault(),J(s("value",a))}},s("label",a)))})),e.default.createElement("div",{className:"tab-content"},e.default.createElement("div",{className:"tab-pane fade show active",role:"tabpanel"},e.default.createElement(e.default.Suspense,{fallback:e.default.createElement(V,{visible:!0,color:"#4fa94d",radius:"9",wrapperStyle:{alignItems:"center",display:"flex",justifyContent:"center"},wrapperClass:"page-loader flex-column bg-dark bg-opacity-25"})},e.default.createElement(n.default,{condition:I},e.default.createElement(n.Case,{value:1},e.default.createElement(R,{...i})),e.default.createElement(n.Case,{value:2},e.default.createElement(ee,{...i})),e.default.createElement(n.Case,{value:3},e.default.createElement(te,{...i})),e.default.createElement(n.Case,{value:4},e.default.createElement(se,{...i})),e.default.createElement(n.Case,{value:5},e.default.createElement(ne,{...i}))))))),e.default.createElement(l.Footer,{className:"text-end"},e.default.createElement(A,null,x("Simpan",L,{onClick:L?null:q}),x("Batal",!1,{variant:"danger",onClick:()=>T()}))))))},me=ae;export{me as default};
