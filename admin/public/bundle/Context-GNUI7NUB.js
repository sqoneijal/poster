import{c as D,d as F,f as j}from"./chunk-ORPF6BBH.js";import{a as C}from"./chunk-LOOOLLH5.js";import{a as b,c as S}from"./chunk-DUWXWW73.js";import{c as a,d as r,f as w,g as x,h as k,k as p}from"./chunk-K5HZLVTK.js";import{p as L}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as B,e as M}from"./chunk-2ZKIS3S6.js";var t=B(M());var N=t.default.lazy(()=>import("./Lists-4FQNZZTP.js")),O=t.default.lazy(()=>import("./Filter-HD4CVVW6.js")),d=0,T=({setToolbarFilter:z})=>{let{module:E,init:I,filter:U}=b(o=>o.redux),l=S(),m=(0,t.useRef)(null),[h,f]=(0,t.useState)(!1),[_,i]=(0,t.useState)([]),g=o=>{let s={};Object.keys(o).forEach(n=>s[n]=o[n]),p("/getdata",s).then(n=>{if(typeof n>"u")return;let{data:e}=n;if(typeof e.code<"u"&&r("code",e)!==200){a(!1,r("message",e));return}l(D({...E,showToolbarFilter:!0})),l(j(s)),s.source==="filter"?i(e.listContent):i(u=>u.concat(e.listContent)),d=e.totalListContent})};(0,t.useLayoutEffect)(()=>(l(F(["Content",document.title])),g({page:0}),()=>{}),[]),(0,t.useLayoutEffect)(()=>(z(w(`Upload ${document.title}`,h,{onClick:()=>m.current.click()})),()=>f(!1)),[h]);let v=o=>{let s={user_modified:r("username",I),file:o};f(!0);let c=p("/submit",s);c.then(n=>{if(typeof n>"u")return;let{data:e}=n;if(typeof e.code<"u"&&r("code",e)!==200){a(!1,r("message",e));return}a(e.status,e.msg_response),e.status&&(i(u=>u.concat(e.content)),d++)}),c.finally(()=>{f(!1)})},y={getContent:g,totalData:d,listContent:_,setListContent:i};return k(U)&&t.default.createElement(L,null,t.default.createElement("input",{multiple:!0,type:"file",className:"d-none",ref:m,onChange:o=>{x(o.target.files)&&v(o.target.files[0])}}),t.default.createElement(t.default.Suspense,{fallback:t.default.createElement(C,{visible:!0,color:"#4fa94d",radius:"9",wrapperStyle:{alignItems:"center",display:"flex",justifyContent:"center"},wrapperClass:"page-loader flex-column bg-dark bg-opacity-25"})},t.default.createElement(O,{...y}),t.default.createElement(N,{...y})))},J=T;export{J as default};
