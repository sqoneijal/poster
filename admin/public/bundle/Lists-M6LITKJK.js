import{a as A}from"./chunk-WMNEGBG6.js";import{a as H}from"./chunk-SJTF4NYS.js";import{c}from"./chunk-ORPF6BBH.js";import{a as T,c as k}from"./chunk-DUWXWW73.js";import{c as f,d as t,e as h,g as C,k as O,p as B}from"./chunk-K5HZLVTK.js";import{f as u,g as E,i,m as N,n as w,p as x}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import{a as $}from"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as D,e as _}from"./chunk-2ZKIS3S6.js";var L=D($()),e=D(_());var j=({totalData:l,listContent:a,setListContent:g,page:b,setPage:M})=>{let{module:v}=T(r=>r.redux),d=(0,e.useRef)(null),y=k(),[I,p]=(0,e.useState)(!1),z=r=>{let o=O("/getdata",{page:r});o.then(s=>{if(typeof s>"u")return;let{data:m}=s;if(typeof m.code<"u"&&t("code",m)!==200){f(!1,t("message",m));return}g(V=>V.concat(m.listContent))}),o.finally(()=>{p(!1),M(s=>s+1)})};(0,e.useLayoutEffect)(()=>(C(a)&&(0,L.default)(".lozad",{enableAutoReload:!0}).observe(),()=>{}),[a]),(0,e.useLayoutEffect)(()=>{let r=new IntersectionObserver(n=>{n[0].isIntersecting&&p(!0)},{threshold:1});return d.current&&r.observe(d.current),()=>{d.current&&r.unobserve(d.current)}},[d,a]),(0,e.useLayoutEffect)(()=>(I&&l>a.length&&z(b+1),()=>p(!1)),[I,b,l,a]);let P=(r,n)=>r.filter(o=>h(t("id",o))!==n),S=r=>{B({msg:`Apakah anda yakin ingin menghapus ${t("origname",r)}`,url:"/hapus",id:t("id",r),custom:{filename:t("filename",r)}}).then(n=>{let{data:o}=n;if(f(o.status,o.msg_response),!o.status)return;let s=P(a,h(t("id",r)));g(s),y(c({...v,totalListContent:s.length})),l=s.length})},Y=r=>{y(c({...v,openForms:!0,pageType:"update",detailContent:r}))},F=r=>{let n=/^.*(?:youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#\&\?]{11}).*/,o=r.match(n);return o?.[1]?o[1]:null};return e.default.createElement(x,null,e.default.createElement(H,{of:a,render:(r,n)=>e.default.createElement(E,{md:4,className:n>2?"mt-6":""},e.default.createElement(u,{className:"card-bordered shadow-sm"},e.default.createElement(u.Header,null,e.default.createElement(w,{overlay:e.default.createElement(N,null,t("nama",r))},e.default.createElement("h3",{className:"card-title"},t("nama",r))),e.default.createElement("div",{className:"card-toolbar"},e.default.createElement(i,null,e.default.createElement(i.Toggle,{variant:"light",className:"btn btn-sm"},"Aksi"),e.default.createElement(i.Menu,null,e.default.createElement(i.Item,{onClick:()=>Y(r)},"Edit"),e.default.createElement(i.Item,{onClick:()=>S(r)},"Hapus"))))),e.default.createElement(u.Body,{className:"text-center px-4"},e.default.createElement(A,{embedId:F(t("link",r))}))))}),e.default.createElement("div",{ref:d}))},W=j;export{W as default};
