import{a as E}from"./chunk-EHA3D7HX.js";import{a as D}from"./chunk-SJTF4NYS.js";import{b as L,c as N,d as o,e as n,g as $,p as B}from"./chunk-5VQXXJVA.js";import{f as C,g as I,p as b}from"./chunk-5TOVVIUE.js";import"./chunk-AQBTORL7.js";import"./chunk-T6HN2I3K.js";import"./chunk-ZDGVLX7E.js";import{d as P,e as _}from"./chunk-2ZKIS3S6.js";var e=P(_());var u=0,j=({selectedVideo:c,setSelectedVideo:l})=>{let i=(0,e.useRef)(null),[d,O]=(0,e.useState)(!0),[m,g]=(0,e.useState)(!1),[h,v]=(0,e.useState)([]),[f,y]=(0,e.useState)({}),x=(t,r)=>{if($(t))if(t.includes(n(o("id",r)))){let a=[];t.forEach(s=>{s!==n(o("id",r))&&a.push(s)}),l(a)}else l([...t,n(o("id",r))]);else l([...t,n(o("id",r))])},p=t=>{let r=L(`/getdaftarvideo?${B(t)}`);r.then(a=>{if(typeof a>"u")return;let{data:s}=a;if(typeof s.code<"u"&&o("code",s)!==200){N(!1,o("message",s));return}o("source",t)&&o("source",t)==="filter"?v(s.listContent):v(F=>F.concat(s.listContent)),u=s.totalData,y({...t,source:""})}),r.finally(()=>{O(!1)})};return(0,e.useLayoutEffect)(()=>(p({page:0}),()=>{}),[]),(0,e.useLayoutEffect)(()=>{let t=new IntersectionObserver(r=>{r[0].isIntersecting&&g(!0)},{threshold:1});return i.current&&t.observe(i.current),()=>{i.current&&t.unobserve(i.current)}},[i,h]),(0,e.useLayoutEffect)(()=>(m&&u>h.length&&!d&&p({...f,source:"",page:n(f.page)+1}),()=>g(!1)),[m,u,h,f,d]),e.default.createElement(b,null,e.default.createElement(E,{...{filter:f,setFilter:y,getData:p}}),e.default.createElement(D,{of:h,render:(t,r)=>e.default.createElement(I,{md:4,xs:12,className:`${r>2?"mt-5":""} col-hover ${c.includes(n(o("id",t)))?"col-hover-selected":""}`,style:{cursor:"pointer"},onClick:()=>x(c,t)},e.default.createElement(C.Body,{className:"p-2"},e.default.createElement("h5",{className:"card-title"},o("judul",t)),e.default.createElement("video",{className:"w-100 h-100",controls:!0},e.default.createElement("source",{src:`/video/${o("video_file",t)}`,type:o("video_type",t)}),"Your browser does not support the video tag.")))}),e.default.createElement("div",{ref:i}))},Y=j;export{Y as default};
