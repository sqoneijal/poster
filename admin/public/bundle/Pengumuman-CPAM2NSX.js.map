{
  "version": 3,
  "sources": ["../../src/page/Admin/Playlist/Tabs/Pengumuman.jsx"],
  "sourcesContent": ["import React, { useLayoutEffect, useRef, useState } from \"react\";\nimport { Col, Row, Table } from \"react-bootstrap\";\nimport { Each } from \"~/Each\";\nimport * as h from \"~/Helpers\";\nimport Filter from \"./Filter\";\n\nlet totalData = 0;\n\nconst Pengumuman = ({ selectedPengumuman, setSelectedPengumuman }) => {\n   const observerTarget = useRef(null);\n\n   // bool\n   const [bottomOfPage, setBottomOfPage] = useState(false);\n   const [isLoading, setIsLoading] = useState(true);\n\n   // object\n   const [filter, setFilter] = useState({});\n\n   // array\n   const [listContent, setListContent] = useState([]);\n\n   const handleSelected = (selected, data) => {\n      if (h.arrLength(selected)) {\n         if (selected.includes(h.toInt(h.parse(\"id\", data)))) {\n            const updateSelected = [];\n            selected.forEach((id) => {\n               if (id !== h.toInt(h.parse(\"id\", data))) updateSelected.push(id);\n            });\n            setSelectedPengumuman(updateSelected);\n         } else {\n            setSelectedPengumuman([...selected, h.toInt(h.parse(\"id\", data))]);\n         }\n      } else {\n         setSelectedPengumuman([...selected, h.toInt(h.parse(\"id\", data))]);\n      }\n   };\n\n   const getData = (filter) => {\n      const fetch = h.get(`/getdaftarpengumuman?${h.serialize(filter)}`);\n      fetch.then((res) => {\n         if (typeof res === \"undefined\") return;\n\n         const { data } = res;\n\n         if (typeof data.code !== \"undefined\" && h.parse(\"code\", data) !== 200) {\n            h.notification(false, h.parse(\"message\", data));\n            return;\n         }\n\n         setFilter(filter);\n         if (h.parse(\"source\", filter) && h.parse(\"source\", filter) === \"filter\") {\n            setListContent(data.listContent);\n         } else {\n            setListContent((prev) => prev.concat(data.listContent));\n         }\n         totalData = data.totalData;\n      });\n      fetch.finally(() => {\n         setIsLoading(false);\n      });\n   };\n\n   useLayoutEffect(() => {\n      getData({ page: 0 });\n      return () => {};\n   }, []);\n\n   useLayoutEffect(() => {\n      const observer = new IntersectionObserver(\n         (entries) => {\n            if (entries[0].isIntersecting) {\n               setBottomOfPage(true);\n            }\n         },\n         { threshold: 1 }\n      );\n\n      if (observerTarget.current) {\n         observer.observe(observerTarget.current);\n      }\n      return () => {\n         if (observerTarget.current) {\n            observer.unobserve(observerTarget.current);\n         }\n      };\n   }, [observerTarget, listContent]);\n\n   useLayoutEffect(() => {\n      if (bottomOfPage && totalData > listContent.length && !isLoading) getData({ ...filter, source: \"\", page: h.toInt(filter.page) + 1 });\n      return () => setBottomOfPage(false);\n   }, [bottomOfPage, totalData, listContent, filter, isLoading]);\n\n   const props = { filter, setFilter, getData };\n\n   return (\n      <Row>\n         <Filter {...props} />\n         <Col>\n            <Table responsive hover className=\"align-middle table-row-dashed fs-6\" size=\"sm\">\n               <thead>\n                  <tr className=\"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0\">\n                     <th style={{ width: \"5%\" }} className=\"text-center\">\n                        no\n                     </th>\n                     <th>judul</th>\n                  </tr>\n               </thead>\n               <tbody className=\"text-gray-600 fw-semibold\">\n                  <Each\n                     of={listContent}\n                     render={(row, index) => (\n                        <tr\n                           style={{ cursor: \"pointer\" }}\n                           className={selectedPengumuman.includes(h.toInt(h.parse(\"id\", row))) ? \"selected\" : \"\"}\n                           onClick={() => handleSelected(selectedPengumuman, row)}>\n                           <td className=\"text-center\">{index + 1}</td>\n                           <td>{h.parse(\"judul\", row)}</td>\n                        </tr>\n                     )}\n                  />\n               </tbody>\n            </Table>\n         </Col>\n         <div ref={observerTarget} />\n      </Row>\n   );\n};\nexport default Pengumuman;\n"],
  "mappings": "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",
  "names": ["import_react", "totalData", "Pengumuman", "selectedPengumuman", "setSelectedPengumuman", "observerTarget", "bottomOfPage", "setBottomOfPage", "isLoading", "setIsLoading", "filter", "setFilter", "listContent", "setListContent", "handleSelected", "selected", "data", "arrLength", "toInt", "parse", "updateSelected", "id", "getData", "fetch", "get", "serialize", "res", "notification", "prev", "observer", "entries", "React", "Row_default", "Filter_default", "Col_default", "Table_default", "Each", "row", "index", "Pengumuman_default"]
}
