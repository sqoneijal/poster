{
  "version": 3,
  "sources": ["../../src/page/Admin/Playlist/Tabs/Images.jsx"],
  "sourcesContent": ["import React, { useLayoutEffect, useRef, useState } from \"react\";\nimport { Card, Col, Image, Row } from \"react-bootstrap\";\nimport { Each } from \"~/Each\";\nimport * as h from \"~/Helpers\";\nimport Filter from \"./Filter\";\n\nlet totalData = 0;\n\nconst Images = ({ selectedImages, setSelectedImages }) => {\n   const observerTarget = useRef(null);\n\n   // bool\n   const [bottomOfPage, setBottomOfPage] = useState(false);\n   const [isLoading, setIsLoading] = useState(true);\n\n   // object\n   const [filter, setFilter] = useState({});\n\n   // array\n   const [listContent, setListContent] = useState([]);\n\n   const handleSelected = (selected, data) => {\n      if (h.arrLength(selected)) {\n         if (selected.includes(h.toInt(h.parse(\"id\", data)))) {\n            const updateSelected = [];\n            selected.forEach((id) => {\n               if (id !== h.toInt(h.parse(\"id\", data))) updateSelected.push(id);\n            });\n            setSelectedImages(updateSelected);\n         } else {\n            setSelectedImages([...selected, h.toInt(h.parse(\"id\", data))]);\n         }\n      } else {\n         setSelectedImages([...selected, h.toInt(h.parse(\"id\", data))]);\n      }\n   };\n\n   const getData = (filter) => {\n      const fetch = h.get(`/getdaftarimages?${h.serialize(filter)}`);\n      fetch.then((res) => {\n         if (typeof res === \"undefined\") return;\n\n         const { data } = res;\n\n         if (typeof data.code !== \"undefined\" && h.parse(\"code\", data) !== 200) {\n            h.notification(false, h.parse(\"message\", data));\n            return;\n         }\n\n         setFilter(filter);\n         if (h.parse(\"source\", filter) && h.parse(\"source\", filter) === \"filter\") {\n            setListContent(data.listContent);\n         } else {\n            setListContent((prev) => prev.concat(data.listContent));\n         }\n         totalData = data.totalData;\n      });\n      fetch.finally(() => {\n         setIsLoading(false);\n      });\n   };\n\n   useLayoutEffect(() => {\n      getData({ page: 0 });\n      return () => {};\n   }, []);\n\n   useLayoutEffect(() => {\n      const observer = new IntersectionObserver(\n         (entries) => {\n            if (entries[0].isIntersecting) {\n               setBottomOfPage(true);\n            }\n         },\n         { threshold: 1 }\n      );\n\n      if (observerTarget.current) {\n         observer.observe(observerTarget.current);\n      }\n      return () => {\n         if (observerTarget.current) {\n            observer.unobserve(observerTarget.current);\n         }\n      };\n   }, [observerTarget, listContent]);\n\n   useLayoutEffect(() => {\n      if (bottomOfPage && totalData > listContent.length && !isLoading) getData({ ...filter, source: \"\", page: h.toInt(filter.page) + 1 });\n      return () => setBottomOfPage(false);\n   }, [bottomOfPage, totalData, listContent, filter, isLoading]);\n\n   const props = { filter, setFilter, getData };\n\n   return (\n      <Row>\n         <Filter {...props} />\n         <Each\n            of={listContent}\n            render={(row, index) => (\n               <Col\n                  md={4}\n                  xs={12}\n                  className={`${index > 2 ? \"mt-5\" : \"\"} col-hover ${\n                     selectedImages.includes(h.toInt(h.parse(\"id\", row))) ? \"col-hover-selected\" : \"\"\n                  }`}\n                  style={{ cursor: \"pointer\" }}\n                  onClick={() => handleSelected(selectedImages, row)}>\n                  <Card.Body className=\"p-2\">\n                     <h5 className=\"card-title\">{h.parse(\"origname\", row)}</h5>\n                     <Image thumbnail src={`/getfile/images/${h.parse(\"filename\", row)}`} />\n                  </Card.Body>\n               </Col>\n            )}\n         />\n         <div ref={observerTarget} />\n      </Row>\n   );\n};\nexport default Images;\n"],
  "mappings": "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",
  "names": ["import_react", "totalData", "Images", "selectedImages", "setSelectedImages", "observerTarget", "bottomOfPage", "setBottomOfPage", "isLoading", "setIsLoading", "filter", "setFilter", "listContent", "setListContent", "handleSelected", "selected", "data", "arrLength", "toInt", "parse", "updateSelected", "id", "getData", "fetch", "get", "serialize", "res", "notification", "prev", "observer", "entries", "React", "Row_default", "Filter_default", "Each", "row", "index", "Col_default", "Card_default", "Image_default", "Images_default"]
}
